- project:
    name: FreeBSD-amd64
    target_arch:
      - amd64
    branch:
      - head
      - stable-11
      - stable-10
    jobs:
      - 'FreeBSD-{branch}-{target_arch}-ci':
          target: amd64
          warnscanner: clang

- project:
    name: FreeBSD-i386
    target_arch:
      - i386
    branch:
      - head
      - stable-11
      - stable-10
    jobs:
      - 'FreeBSD-{branch}-{target_arch}-ci':
          target: i386
          warnscanner: clang

- project:
    name: FreeBSD-aarch64
    target_arch:
      - aarch64
    branch:
      - head
      - stable-11
    jobs:
      - 'FreeBSD-{branch}-aarch64-ci':
          target: arm64
          warnscanner: clang

- project:
    name: FreeBSD-sparc64
    target_arch:
      - sparc64
    branch:
      - head
      - stable-11
      - stable-10
    jobs:
      - 'FreeBSD-{branch}-sparc64-ci':
          target: sparc64
          warnscanner: gcc4

- project:
    name: FreeBSD-powerpc
    target_arch:
      - powerpc
    branch:
      - head
    jobs:
      - 'FreeBSD-{branch}-powerpc-ci':
          target: powerpc
          warnscanner: gcc4

- project:
    name: FreeBSD-powerpc64
    target_arch:
      - powerpc64
    branch:
      - head
    jobs:
      - 'FreeBSD-{branch}-powerpc64-ci':
          target: powerpc
          warnscanner: gcc4

- project:
    name: FreeBSD-powerpcspe
    target_arch:
      - powerpcspe
    branch:
      - head
    jobs:
      - 'FreeBSD-{branch}-powerpcspe-ci':
          target: powerpc
          warnscanner: gcc4

- project:
    name: FreeBSD-riscv64
    target_arch:
      - riscv64
    branch:
      - head
    jobs:
      - 'FreeBSD-{branch}-riscv64-ci':
          target: riscv
          warnscanner: gcc
          disable_job_images: true
          disable_job_LINT: true
          artifact_path: artifact
          node_job_build: jailer_slow

- job:
    name: FreeBSD-head-scan_build
    defaults: global
    node: jailer_slow
    scm:
      - FreeBSD-src-head
    triggers:
      - timed: '@daily'
    builders:
      - add-svn-revision-description
      - checkout-scripts
      - setup-jail
      - execute-in-jail
    publishers:
      - clean-jail
      - publish-clang-scan-build-results
    wrappers:
      - timestamps
      - timeout:
          timeout: 240
          timeout-var: 'BUILD_TIMEOUT'
          fail: true
          type: absolute

- job:
    name: FreeBSD-head-amd64-gcc
    defaults: global
    node: jailer
    scm:
      - FreeBSD-src-head
    parameters:
      - string:
          name: SVN_REVISION
          description: "Subversion revision"
    builders:
      - add-svn-revision-description
      - checkout-scripts
      - setup-jail
      - execute-in-jail
    publishers:
      - scan-gcc-warnings
      - clean-jail
    wrappers:
      - timestamps
      - timeout:
          timeout: 90
          timeout-var: 'BUILD_TIMEOUT'
          fail: true
          type: absolute

- job:
    name: FreeBSD-head-amd64-dtrace_build
    defaults: global
    node: jailer_fast
    scm:
      - FreeBSD-src-head
    parameters:
      - string:
          name: SVN_REVISION
          description: "Subversion revision"
    builders:
      - add-svn-revision-description
      - checkout-scripts
      - setup-jail
      - execute-in-jail
    publishers:
      - ftp:
          site: 'artifact.ci.freebsd.org'
          target: 'snapshot'
          source: '{artifact_path}/**'
          remove-prefix: '{artifact_path}'
      - clean-jail
    wrappers:
      - timestamps
      - timeout:
          timeout: 90
          timeout-var: 'BUILD_TIMEOUT'
          fail: true
          type: absolute
      - bind-artifact-credential
